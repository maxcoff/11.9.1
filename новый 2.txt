неплохо было бы не выставлять хедж сразу как только появляется исходная позиция а дождаться пока по ней пойдет убыток в размере который нужно указать в окружении, и развивая мысль далее - необходимо установить на открытую исходную позицию TP в размере TP_SIZE до того как мы войдем в Hedge mode и далее в tpsl mode . А когда откроем хедж и перейдем в TPSL режим то этот TP будет заменен на OCO TPSL.

self.inst          = get("INSTRUMENT") or ""