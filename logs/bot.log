[2025-08-06T00:23:53] INFO bot [mode=START] : ‚è≤Ô∏è Time offset set to 230 ms
[2025-08-06T00:23:54] INFO bot [mode=START] : üìà Initial snapshot fetched
[2025-08-06T00:23:55] INFO bot [mode=START] : Orchestrator started
[2025-08-06T00:23:55] INFO bot [mode=-] : [REINVEST-LOOP] –≤—Ö–æ–¥ –≤ —Ü–∏–∫–ª, –∂–¥—É tp_filled_evt
[2025-08-06T00:23:55] INFO bot [mode=STARTUP] : Startup detected TWO legs ‚Üí enter TPSL mode
[2025-08-06T00:23:56] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] login successful
[2025-08-06T00:23:56] INFO bot [mode=WS] : ‚úÖ [WS-PUB] subscribed to tickers
[2025-08-06T00:23:56] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] subscribed to orders
[2025-08-06T00:23:56] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] subscribed to positions
[2025-08-06T00:23:58] DEBUG bot [mode=-] : üîÑ [TPSL] reinstall_all ‚Üí init(long)=23.55@0.2388, hedge(short)=51.15@0.1993, tp_init=0.241188, tp_hedge=0.16498292
[2025-08-06T00:23:59] INFO bot [mode=-] : üßπ [TPSL] cancelled algos: [{'instId': 'DOGE-USDT-SWAP', 'algoId': '2748949778791481344'}, {'instId': 'DOGE-USDT-SWAP', 'algoId': '2748949790065770496'}]
[2025-08-06T00:23:59] INFO bot [mode=-] : üéØ [TPSL] placed OCO(LDOGEUSDTSWAP) @ 0.241188
[2025-08-06T00:24:00] DEBUG bot [mode=-] : üîÑ [TPSL] initial sync pass
[2025-08-06T00:24:00] INFO bot [mode=-] : üéØ [TPSL] placed Conditional(SDOGEUSDTSWAP) @ 0.16498292
[2025-08-06T00:38:15] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: BUY/short closed size=36.56@0.19875
[2025-08-06T00:38:15] ERROR bot [mode=LOOP] : Loop-level exception
Traceback (most recent call last):
  File "d:\Develop\Python\trade_bot\11.9.1\core\position_snapshot.py", line 86, in _on_ws_position
    px   = float(pos.get("avgPx", 0))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: could not convert string to float: ''
[2025-08-06T00:38:16] INFO bot [mode=REPREHEDGE] : ‚Üí TPSL ‚Üí PRE-HEDGE RE mode
[2025-08-06T00:38:16] INFO bot [mode=-] : üîÑ [PreHEDGE] –Ω–æ–≤—ã–π –∑–∞–ø—É—Å–∫ tp_watcher
[2025-08-06T00:38:16] INFO bot [mode=-] : üéØ [PreHEDGE] –∑–∞—Ö–æ–¥–∏–º –≤ not self.tp_active 
[2025-08-06T00:38:16] WARNING bot [mode=REST] : [REST] swallow code=1, sCode=['51088'] on POST /api/v5/trade/order-algo
[2025-08-06T00:38:16] ERROR bot [mode=-] : ‚ùå [PreHEDGE] TP placement failed: code=-1, msg=
[2025-08-06T00:38:16] INFO bot [mode=-] : ‚è≥ [PreHEDGE] waiting for loss ‚â§ ‚àí0.50%
[2025-08-06T00:38:16] DEBUG bot [mode=-] : [PreHEDGE] loss_task alive? True
[2025-08-06T00:38:19] INFO bot [mode=-] : üö® [PreHEDGE] loss trigger hit ‚Üí starting hedge
[2025-08-06T00:38:19] INFO bot [mode=HEDGE] : ‚ñ∂Ô∏è [HEDGE] run start: WS pos (L,S)=(23.5500,0.0000)
[2025-08-06T00:38:19] INFO bot [mode=HEDGE] : ‚è± [HEDGE] spike-filter: waiting 3.00s
[2025-08-06T00:38:22] INFO bot [mode=HEDGE] : üîß [HEDGE] placing market hedge: side=sell, size=47.1000
[2025-08-06T00:38:22] INFO bot [mode=HEDGE] : üéØ [HEDGE] placed hedge ordId=2749030829109071872
[2025-08-06T00:38:22] DEBUG bot [mode=HEDGE] : [HEDGE] waiting for fill up to +5.0s
[2025-08-06T00:38:22] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: SELL/short closed size=43.14@0.19865
[2025-08-06T00:38:23] INFO bot [mode=TPSL] : Two positions ‚Üí TPSL mode active
[2025-08-06T00:38:23] INFO bot [mode=-] : üõ†Ô∏è [TPSL] mismatch detected ‚Üí reinstall all algos
[2025-08-06T00:38:23] DEBUG bot [mode=-] : üîÑ [TPSL] reinstall_all ‚Üí init(long)=23.55@0.2388, hedge(short)=47.1@0.1986539171974523, tp_init=0.241188, tp_hedge=0.15784044
[2025-08-06T00:38:24] INFO bot [mode=-] : üßπ [TPSL] cancelled algos: [{'instId': 'DOGE-USDT-SWAP', 'algoId': '2749001874630852608'}]
[2025-08-06T00:38:24] INFO bot [mode=-] : üéØ [TPSL] placed OCO(LDOGEUSDTSWAP) @ 0.241188
[2025-08-06T00:38:25] INFO bot [mode=-] : üéØ [TPSL] placed Conditional(SDOGEUSDTSWAP) @ 0.15784044
[2025-08-06T00:38:25] INFO bot [mode=SHUTDOWN] : Shutdown initiated
[2025-08-06T00:38:25] INFO bot [mode=SHUTDOWN] : Shutdown complete
[2025-08-06T00:39:58] INFO bot [mode=START] : ‚è≤Ô∏è Time offset set to 239 ms
[2025-08-06T00:39:58] INFO bot [mode=START] : üìà Initial snapshot fetched
[2025-08-06T00:39:59] INFO bot [mode=START] : Orchestrator started
[2025-08-06T00:39:59] INFO bot [mode=-] : [REINVEST-LOOP] –≤—Ö–æ–¥ –≤ —Ü–∏–∫–ª, –∂–¥—É tp_filled_evt
[2025-08-06T00:39:59] INFO bot [mode=STARTUP] : Startup detected TWO legs ‚Üí enter TPSL mode
[2025-08-06T00:40:00] INFO bot [mode=WS] : ‚úÖ [WS-PUB] subscribed to tickers
[2025-08-06T00:40:00] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] login successful
[2025-08-06T00:40:00] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] subscribed to orders
[2025-08-06T00:40:00] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] subscribed to positions
[2025-08-06T00:40:03] DEBUG bot [mode=-] : üîÑ [TPSL] reinstall_all ‚Üí init(long)=23.55@0.2388, hedge(short)=51.37@0.1985, tp_init=0.241188, tp_hedge=0.1637782
[2025-08-06T00:40:03] INFO bot [mode=-] : üßπ [TPSL] cancelled algos: [{'instId': 'DOGE-USDT-SWAP', 'algoId': '2749030894919565312'}]
[2025-08-06T00:40:04] INFO bot [mode=-] : üéØ [TPSL] placed OCO(LDOGEUSDTSWAP) @ 0.241188
[2025-08-06T00:40:04] DEBUG bot [mode=-] : üîÑ [TPSL] initial sync pass
[2025-08-06T00:40:04] INFO bot [mode=-] : üéØ [TPSL] placed Conditional(SDOGEUSDTSWAP) @ 0.1637782
[2025-08-06T00:41:50] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: SELL/long closed size=0.47@0.19845
[2025-08-06T01:39:30] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: SELL/long closed size=0.47@0.1987
[2025-08-06T02:01:00] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] login successful
[2025-08-06T02:01:00] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] subscribed to orders
[2025-08-06T02:01:01] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] subscribed to positions
[2025-08-06T03:46:04] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] login successful
[2025-08-06T03:46:04] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] subscribed to orders
[2025-08-06T03:46:05] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] subscribed to positions
[2025-08-06T03:46:07] INFO bot [mode=WS] : ‚úÖ [WS-PUB] subscribed to tickers
[2025-08-06T03:51:19] INFO bot [mode=WS] : ‚úÖ [WS-PUB] subscribed to tickers
[2025-08-06T07:42:48] INFO bot [mode=-] : üõ†Ô∏è [TPSL] mismatch detected ‚Üí reinstall all algos
[2025-08-06T07:42:48] DEBUG bot [mode=-] : üîÑ [TPSL] reinstall_all ‚Üí init(long)=22.61@0.2388, hedge(short)=51.37@0.1985, tp_init=0.241188, tp_hedge=0.16623433
[2025-08-06T07:42:48] INFO bot [mode=-] : üßπ [TPSL] cancelled algos: [{'instId': 'DOGE-USDT-SWAP', 'algoId': '2749034230297214976'}, {'instId': 'DOGE-USDT-SWAP', 'algoId': '2749034241235959808'}]
[2025-08-06T07:42:49] INFO bot [mode=-] : üéØ [TPSL] placed OCO(LDOGEUSDTSWAP) @ 0.241188
[2025-08-06T07:42:49] INFO bot [mode=-] : üéØ [TPSL] placed Conditional(SDOGEUSDTSWAP) @ 0.16623433
[2025-08-06T08:25:29] INFO bot [mode=WS] : ‚úÖ [WS-PUB] subscribed to tickers
[2025-08-06T11:57:25] INFO bot [mode=WS] : ‚úÖ [WS-PUB] subscribed to tickers
[2025-08-06T12:12:40] INFO bot [mode=-] : üõ†Ô∏è [TPSL] mismatch detected ‚Üí reinstall all algos
[2025-08-06T12:12:40] DEBUG bot [mode=-] : üîÑ [TPSL] reinstall_all ‚Üí init(long)=22.61@0.2388, hedge(short)=51.37@0.1985, tp_init=0.241188, tp_hedge=0.16623433
[2025-08-06T12:12:40] INFO bot [mode=-] : üßπ [TPSL] cancelled algos: [{'instId': 'DOGE-USDT-SWAP', 'algoId': '2749885349168758784'}, {'instId': 'DOGE-USDT-SWAP', 'algoId': '2749885337626034176'}]
[2025-08-06T12:12:41] INFO bot [mode=-] : üéØ [TPSL] placed OCO(LDOGEUSDTSWAP) @ 0.241188
[2025-08-06T12:12:41] INFO bot [mode=-] : üéØ [TPSL] placed Conditional(SDOGEUSDTSWAP) @ 0.16623433
[2025-08-06T12:30:25] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] login successful
[2025-08-06T12:30:25] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] subscribed to orders
[2025-08-06T12:30:26] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] subscribed to positions
[2025-08-06T12:34:48] INFO bot [mode=WS] : ‚úÖ [WS-PUB] subscribed to tickers
[2025-08-06T12:42:37] WARNING bot [mode=REST] :   ‚ö† Time sync attempt #1 timed out
[2025-08-06T12:43:32] ERROR bot [mode=WS] : üîÑ [WS-PRIV] Disconnected: 502, message='Invalid response status', url='wss://wspap.okx.com:8443/ws/v5/private', retry in 1s
[2025-08-06T12:43:34] ERROR bot [mode=WS] : üîÑ [WS-PRIV] Disconnected: 502, message='Invalid response status', url='wss://wspap.okx.com:8443/ws/v5/private', retry in 2s
[2025-08-06T12:43:38] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] login successful
[2025-08-06T12:43:38] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] subscribed to orders
[2025-08-06T12:43:38] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] subscribed to positions
[2025-08-06T13:53:29] WARNING bot [mode=REST] :   ‚ö† Time sync attempt #1 timed out
[2025-08-06T13:53:35] WARNING bot [mode=TPSL] : [TPSL] fetch_pending_algos timed out after 5.0s
[2025-08-06T14:27:15] INFO bot [mode=WS] : ‚úÖ [WS-PUB] subscribed to tickers
[2025-08-06T16:17:15] WARNING bot [mode=TPSL] : [TPSL] fetch_pending_algos timed out after 5.0s
[2025-08-06T16:17:35] INFO bot [mode=REST] : Time offset updated 239 ‚Üí -889 ms
[2025-08-06T16:17:45] INFO bot [mode=REST] : Time offset updated -889 ‚Üí 179 ms
[2025-08-06T16:18:29] INFO bot [mode=REST] : Time offset updated 179 ‚Üí -905 ms
[2025-08-06T16:19:00] INFO bot [mode=REST] : Time offset updated -905 ‚Üí 192 ms
[2025-08-06T16:49:32] WARNING bot [mode=TPSL] : [TPSL] fetch_pending_algos timed out after 5.0s
[2025-08-06T16:49:50] WARNING bot [mode=TPSL] : [TPSL] fetch_pending_algos timed out after 5.0s
[2025-08-06T16:52:57] WARNING bot [mode=TPSL] : [TPSL] fetch_pending_algos timed out after 5.0s
[2025-08-06T16:53:08] WARNING bot [mode=TPSL] : [TPSL] fetch_pending_algos timed out after 5.0s
[2025-08-06T16:53:29] WARNING bot [mode=TPSL] : [TPSL] fetch_pending_algos timed out after 5.0s
[2025-08-06T16:55:27] WARNING bot [mode=TPSL] : [TPSL] fetch_pending_algos timed out after 5.0s
[2025-08-06T16:56:09] WARNING bot [mode=TPSL] : [TPSL] fetch_pending_algos timed out after 5.0s
[2025-08-06T17:28:42] INFO bot [mode=REST] : Time offset updated 192 ‚Üí -1106 ms
[2025-08-06T17:28:52] INFO bot [mode=REST] : Time offset updated -1106 ‚Üí 177 ms
[2025-08-06T17:36:02] WARNING bot [mode=TPSL] : [TPSL] fetch_pending_algos timed out after 5.0s
[2025-08-06T17:36:33] WARNING bot [mode=TPSL] : [TPSL] fetch_pending_algos timed out after 5.0s
[2025-08-06T17:39:40] WARNING bot [mode=TPSL] : [TPSL] fetch_pending_algos timed out after 5.0s
[2025-08-06T19:12:05] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] login successful
[2025-08-06T19:12:05] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] subscribed to orders
[2025-08-06T19:12:06] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] subscribed to positions
[2025-08-06T19:30:04] INFO bot [mode=WS] : ‚úÖ [WS-PUB] subscribed to tickers
[2025-08-06T19:31:38] WARNING bot [mode=REST] :   ‚ö† Time sync attempt #1 timed out
[2025-08-06T19:56:38] WARNING bot [mode=TPSL] : [TPSL] fetch_pending_algos timed out after 5.0s
[2025-08-06T20:29:14] ERROR bot [mode=REST] : [TimeoutError] GET https://www.okx.com/api/v5/account/positions, attempt 1/4, sleeping 1.0s before retry
Traceback (most recent call last):
  File "C:\Users\Professional\AppData\Local\Programs\Python\Python312\Lib\site-packages\aiohttp\client_reqrep.py", line 1059, in start
    message, payload = await protocol.read()  # type: ignore[union-attr]
                       ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Professional\AppData\Local\Programs\Python\Python312\Lib\site-packages\aiohttp\streams.py", line 644, in read
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "d:\Develop\Python\trade_bot\11.9.1\core\rest_client.py", line 206, in request
    async with self.session.request(
  File "C:\Users\Professional\AppData\Local\Programs\Python\Python312\Lib\site-packages\aiohttp\client.py", line 1360, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "C:\Users\Professional\AppData\Local\Programs\Python\Python312\Lib\site-packages\aiohttp\client.py", line 690, in _request
    await resp.start(conn)
  File "C:\Users\Professional\AppData\Local\Programs\Python\Python312\Lib\site-packages\aiohttp\client_reqrep.py", line 1054, in start
    with self._timer:
  File "C:\Users\Professional\AppData\Local\Programs\Python\Python312\Lib\site-packages\aiohttp\helpers.py", line 749, in __exit__
    raise asyncio.TimeoutError from exc_val
TimeoutError
[2025-08-06T20:37:08] WARNING bot [mode=REST] :   ‚ö† Time sync attempt #1 timed out
[2025-08-06T20:47:12] WARNING bot [mode=TPSL] : [TPSL] fetch_pending_algos timed out after 5.0s
[2025-08-06T20:47:23] WARNING bot [mode=TPSL] : [TPSL] fetch_pending_algos timed out after 5.0s
[2025-08-06T20:49:22] WARNING bot [mode=REST] :   ‚ö† Time sync attempt #1 timed out
[2025-08-06T21:04:42] INFO bot [mode=REST] : Time offset updated 177 ‚Üí -1068 ms
[2025-08-06T21:04:45] WARNING bot [mode=TPSL] : [TPSL] fetch_pending_algos timed out after 5.0s
[2025-08-06T21:04:52] INFO bot [mode=REST] : Time offset updated -1068 ‚Üí 159 ms
[2025-08-06T21:06:00] WARNING bot [mode=TPSL] : [TPSL] fetch_pending_algos timed out after 5.0s
[2025-08-06T21:06:10] WARNING bot [mode=TPSL] : [TPSL] fetch_pending_algos timed out after 5.0s
[2025-08-06T21:37:13] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] login successful
[2025-08-06T21:37:13] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] subscribed to orders
[2025-08-06T21:37:13] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] subscribed to positions
[2025-08-06T21:54:29] WARNING bot [mode=TPSL] : [TPSL] fetch_pending_algos timed out after 5.0s
[2025-08-06T22:27:46] INFO bot [mode=-] : üõ†Ô∏è [TPSL] mismatch detected ‚Üí reinstall all algos
[2025-08-06T22:27:46] DEBUG bot [mode=-] : üîÑ [TPSL] reinstall_all ‚Üí init(long)=22.61@0.2388, hedge(short)=51.37@0.1985, tp_init=0.241188, tp_hedge=0.16623433
[2025-08-06T22:27:46] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: BUY/short closed size=8.22@0.2072
[2025-08-06T22:27:46] ERROR bot [mode=LOOP] : Loop-level exception
Traceback (most recent call last):
  File "d:\Develop\Python\trade_bot\11.9.1\core\position_snapshot.py", line 86, in _on_ws_position
    px   = float(pos.get("avgPx", 0))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: could not convert string to float: ''
[2025-08-06T22:27:46] INFO bot [mode=REPREHEDGE] : ‚Üí TPSL ‚Üí PRE-HEDGE RE mode
[2025-08-06T22:27:46] INFO bot [mode=-] : üîÑ [PreHEDGE] –Ω–æ–≤—ã–π –∑–∞–ø—É—Å–∫ tp_watcher
[2025-08-06T22:27:46] INFO bot [mode=-] : üéØ [PreHEDGE] –∑–∞—Ö–æ–¥–∏–º –≤ not self.tp_active 
[2025-08-06T22:27:46] INFO bot [mode=-] : üßπ [TPSL] cancelled algos: [{'instId': 'DOGE-USDT-SWAP', 'algoId': '2750428654914846720'}]
[2025-08-06T22:27:47] WARNING bot [mode=REST] : [REST] swallow code=1, sCode=['51088'] on POST /api/v5/trade/order-algo
[2025-08-06T22:27:47] INFO bot [mode=-] : üéØ [TPSL] placed OCO(LDOGEUSDTSWAP) @ 0.241188
[2025-08-06T22:27:47] INFO bot [mode=-] : üéØ [PreHEDGE] TP placed @ 0.24118800
[2025-08-06T22:27:47] INFO bot [mode=-] : ‚è≥ [PreHEDGE] waiting for loss ‚â§ ‚àí0.50%
[2025-08-06T22:27:47] DEBUG bot [mode=-] : [PreHEDGE] loss_task alive? True
[2025-08-06T22:27:47] ERROR bot [mode=REST] : API error code=1 response={'code': '1', 'data': [{'algoClOrdId': '', 'algoId': '', 'clOrdId': '', 'sCode': '51023', 'sMsg': "Position doesn't exist. ", 'tag': ''}], 'msg': ''}
[2025-08-06T22:27:47] ERROR bot [mode=-] : ‚ùå [TPSL] conditional failed for SDOGEUSDTSWAP: API error 1
[2025-08-06T22:27:47] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: SELL/long closed size=6.33@0.2077
[2025-08-06T22:27:47] ERROR bot [mode=LOOP] : Loop-level exception
Traceback (most recent call last):
  File "d:\Develop\Python\trade_bot\11.9.1\core\position_snapshot.py", line 86, in _on_ws_position
    px   = float(pos.get("avgPx", 0))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: could not convert string to float: ''
[2025-08-06T22:27:48] INFO bot [mode=ORDER] : ‚Üí ORDER mode , self.hedged = False
[2025-08-06T22:27:48] INFO bot [mode=ORDER] : üîÑ [OrderMode] starting order loop
[2025-08-06T22:27:49] INFO bot [mode=ORDER] : üéØ [OrderMode] placed FOK: BUY 2751667100771995648@0.20581969, SELL 2751667100906213376@0.20893031
[2025-08-06T22:27:49] INFO bot [mode=-] : üö® [PreHEDGE] loss trigger hit ‚Üí starting hedge
[2025-08-06T22:27:49] INFO bot [mode=HEDGE] : ‚ñ∂Ô∏è [HEDGE] run start: WS pos (L,S)=(0.0000,0.0000)
[2025-08-06T22:27:49] INFO bot [mode=HEDGE] : ‚è± [HEDGE] spike-filter: waiting 3.00s
[2025-08-06T22:27:52] WARNING bot [mode=HEDGE] : [HEDGE] ups, first leg lost ‚Üí skipping hedge
[2025-08-06T22:27:55] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: SELL/short closed size=0.05@0.20895
[2025-08-06T22:27:55] INFO bot [mode=ORDER] : üõë [OrderMode] cancelled 2751667100771995648
[2025-08-06T22:27:55] INFO bot [mode=PREHEDGE] : ‚Üí PRE-HEDGE mode
[2025-08-06T22:27:55] INFO bot [mode=-] : üîÑ [PreHEDGE] –Ω–æ–≤—ã–π –∑–∞–ø—É—Å–∫ tp_watcher
[2025-08-06T22:27:55] INFO bot [mode=-] : üéØ [PreHEDGE] –∑–∞—Ö–æ–¥–∏–º –≤ not self.tp_active 
[2025-08-06T22:27:56] INFO bot [mode=HEDGE] : ‚è± [PREHEDGE] spike filtered: pnl back to 0.0143
[2025-08-06T22:27:56] INFO bot [mode=ORDER] : ‚úÖ [OrderMode] filled 2751667100906213376, ORDER mode turn off
[2025-08-06T22:27:56] INFO bot [mode=-] : üéØ [PreHEDGE] TP placed @ 0.20686050
[2025-08-06T22:27:56] INFO bot [mode=-] : ‚è≥ [PreHEDGE] waiting for loss ‚â§ ‚àí0.50%
[2025-08-06T22:27:56] DEBUG bot [mode=-] : [PreHEDGE] loss_task alive? False
[2025-08-06T22:27:56] INFO bot [mode=-] : üö® [PreHEDGE] loss trigger hit ‚Üí starting hedge
[2025-08-06T22:27:56] INFO bot [mode=HEDGE] : ‚ñ∂Ô∏è [HEDGE] run start: WS pos (L,S)=(0.0000,0.0500)
[2025-08-06T22:27:56] INFO bot [mode=HEDGE] : ‚è± [HEDGE] spike-filter: waiting 3.00s
[2025-08-06T22:27:59] INFO bot [mode=HEDGE] : üîß [HEDGE] placing market hedge: side=buy, size=0.1000
[2025-08-06T22:27:59] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: BUY/long closed size=0.1@0.20815
[2025-08-06T22:27:59] INFO bot [mode=HEDGE] : üéØ [HEDGE] placed hedge ordId=2751667426484867072
[2025-08-06T22:27:59] DEBUG bot [mode=HEDGE] : [HEDGE] waiting for fill up to +5.0s
[2025-08-06T22:27:59] INFO bot [mode=TPSL] : Two positions ‚Üí TPSL mode active
[2025-08-06T22:28:04] INFO bot [mode=-] : üõ†Ô∏è [TPSL] mismatch detected ‚Üí reinstall all algos
[2025-08-06T22:28:04] DEBUG bot [mode=-] : üîÑ [TPSL] reinstall_all ‚Üí init(short)=0.05@0.20895, hedge(long)=0.1@0.20815, tp_init=0.2068605, tp_hedge=0.20851877
[2025-08-06T22:28:05] INFO bot [mode=-] : üßπ [TPSL] cancelled algos: [{'instId': 'DOGE-USDT-SWAP', 'algoId': '2751667310027685888'}]
[2025-08-06T22:28:05] INFO bot [mode=-] : üéØ [TPSL] placed OCO(SDOGEUSDTSWAP) @ 0.2068605
[2025-08-06T22:28:06] INFO bot [mode=-] : üéØ [TPSL] placed Conditional(LDOGEUSDTSWAP) @ 0.20851877
[2025-08-06T22:28:10] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: BUY/short closed size=0.05@0.209
[2025-08-06T22:28:10] DEBUG bot [mode=-] : [TPSL-DEBUG] is_tp=True entry_side=short side=BUY
[2025-08-06T22:28:10] INFO bot [mode=-] : [REINVEST-SIGNAL] tp_filled_evt.set() fired, fill_px=0.209
[2025-08-06T22:28:10] ERROR bot [mode=LOOP] : Loop-level exception
Traceback (most recent call last):
  File "d:\Develop\Python\trade_bot\11.9.1\core\orchestrator.py", line 229, in _reinvest_loop
    await self.reinvestor.handle_tp_fill((ep, eq, Decimal(str(tp_price)), side))
  File "d:\Develop\Python\trade_bot\11.9.1\core\reinvest.py", line 43, in handle_tp_fill
    await self._do_reinvest(snapshot)
  File "d:\Develop\Python\trade_bot\11.9.1\core\reinvest.py", line 49, in _do_reinvest
    ep, eq, tp, side = map(Decimal, snapshot)
    ^^^^^^^^^^^^^^^^
decimal.InvalidOperation: [<class 'decimal.ConversionSyntax'>]
[2025-08-06T22:28:10] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: SELL/long closed size=0.1@0.2087
[2025-08-06T22:28:10] ERROR bot [mode=LOOP] : Loop-level exception
Traceback (most recent call last):
  File "d:\Develop\Python\trade_bot\11.9.1\core\position_snapshot.py", line 86, in _on_ws_position
    px   = float(pos.get("avgPx", 0))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: could not convert string to float: ''
[2025-08-06T22:28:10] ERROR bot [mode=LOOP] : Loop-level exception
Traceback (most recent call last):
  File "d:\Develop\Python\trade_bot\11.9.1\core\position_snapshot.py", line 86, in _on_ws_position
    px   = float(pos.get("avgPx", 0))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: could not convert string to float: ''
[2025-08-06T22:28:10] INFO bot [mode=ORCHESTRATOR] : ‚Üí All legs closed ‚Üí back to ORDER mode
[2025-08-06T22:28:10] INFO bot [mode=ORDER] : ‚Üí ORDER mode , self.hedged = False
[2025-08-06T22:28:10] INFO bot [mode=ORDER] : üîÑ [OrderMode] starting order loop
[2025-08-06T22:28:12] INFO bot [mode=ORDER] : üéØ [OrderMode] placed FOK: BUY 2751667845982375936@0.20644, SELL 2751667846250811392@0.20956
[2025-08-06T22:28:20] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: SELL/short closed size=0.05@0.2096
[2025-08-06T22:28:20] INFO bot [mode=ORDER] : üõë [OrderMode] cancelled 2751667845982375936
[2025-08-06T22:28:20] INFO bot [mode=PREHEDGE] : ‚Üí PRE-HEDGE mode
[2025-08-06T22:28:20] INFO bot [mode=-] : üîÑ [PreHEDGE] –Ω–æ–≤—ã–π –∑–∞–ø—É—Å–∫ tp_watcher
[2025-08-06T22:28:20] INFO bot [mode=-] : üéØ [PreHEDGE] –∑–∞—Ö–æ–¥–∏–º –≤ not self.tp_active 
[2025-08-06T22:28:21] INFO bot [mode=ORDER] : ‚úÖ [OrderMode] filled 2751667846250811392, ORDER mode turn off
[2025-08-06T22:28:21] INFO bot [mode=-] : üéØ [PreHEDGE] TP placed @ 0.20750400
[2025-08-06T22:28:21] INFO bot [mode=-] : ‚è≥ [PreHEDGE] waiting for loss ‚â§ ‚àí0.50%
[2025-08-06T22:28:21] DEBUG bot [mode=-] : [PreHEDGE] loss_task alive? False
[2025-08-06T22:28:21] INFO bot [mode=-] : üö® [PreHEDGE] loss trigger hit ‚Üí starting hedge
[2025-08-06T22:28:21] INFO bot [mode=HEDGE] : ‚ñ∂Ô∏è [HEDGE] run start: WS pos (L,S)=(0.0000,0.0500)
[2025-08-06T22:28:21] INFO bot [mode=HEDGE] : ‚è± [HEDGE] spike-filter: waiting 3.00s
[2025-08-06T22:28:24] INFO bot [mode=HEDGE] : üîß [HEDGE] placing market hedge: side=buy, size=0.1000
[2025-08-06T22:28:24] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: BUY/long closed size=0.04@0.2077
[2025-08-06T22:28:24] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: BUY/short closed size=0.05@0.2077
[2025-08-06T22:28:24] ERROR bot [mode=LOOP] : Loop-level exception
Traceback (most recent call last):
  File "d:\Develop\Python\trade_bot\11.9.1\core\position_snapshot.py", line 86, in _on_ws_position
    px   = float(pos.get("avgPx", 0))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: could not convert string to float: ''
[2025-08-06T22:28:24] ERROR bot [mode=LOOP] : Loop-level exception
Traceback (most recent call last):
  File "d:\Develop\Python\trade_bot\11.9.1\core\position_snapshot.py", line 86, in _on_ws_position
    px   = float(pos.get("avgPx", 0))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: could not convert string to float: ''
[2025-08-06T22:28:24] INFO bot [mode=HEDGE] : üéØ [HEDGE] placed hedge ordId=2751668268566892544
[2025-08-06T22:28:24] DEBUG bot [mode=HEDGE] : [HEDGE] waiting for fill up to +5.0s
[2025-08-06T22:28:26] DEBUG bot [mode=HEDGE] : [HEDGE] WS(L,S)=(0.1000,0.0000), REST(L,S)=(0.1000,0.0000)
[2025-08-06T22:28:27] DEBUG bot [mode=HEDGE] : [HEDGE] WS(L,S)=(0.1000,0.0000), REST(L,S)=(0.1000,0.0000)
[2025-08-06T22:28:29] DEBUG bot [mode=HEDGE] : [HEDGE] WS(L,S)=(0.1000,0.0000), REST(L,S)=(0.1000,0.0000)
[2025-08-06T22:28:31] DEBUG bot [mode=HEDGE] : [HEDGE] WS(L,S)=(0.1000,0.0000), REST(L,S)=(0.1000,0.0000)
[2025-08-06T22:28:31] WARNING bot [mode=HEDGE] : ‚ö†Ô∏è [HEDGE] fill timeout after 5.0s
[2025-08-06T22:28:31] INFO bot [mode=HEDGE] : ‚Üí HEDGE.run() done, –∏–¥–µ–º –≤ TPSL
[2025-08-06T22:28:32] INFO bot [mode=PREHEDGE] : ‚Üí PRE-HEDGE mode
[2025-08-06T22:28:32] INFO bot [mode=-] : üîÑ [PreHEDGE] –Ω–æ–≤—ã–π –∑–∞–ø—É—Å–∫ tp_watcher
[2025-08-06T22:28:32] INFO bot [mode=-] : üéØ [PreHEDGE] –∑–∞—Ö–æ–¥–∏–º –≤ not self.tp_active 
[2025-08-06T22:28:32] INFO bot [mode=-] : üéØ [PreHEDGE] TP placed @ 0.20977700
[2025-08-06T22:28:32] INFO bot [mode=-] : ‚è≥ [PreHEDGE] waiting for loss ‚â§ ‚àí0.50%
[2025-08-06T22:28:32] DEBUG bot [mode=-] : [PreHEDGE] loss_task alive? False
[2025-08-06T22:28:32] INFO bot [mode=-] : üö® [PreHEDGE] loss trigger hit ‚Üí starting hedge
[2025-08-06T22:28:32] INFO bot [mode=HEDGE] : ‚ñ∂Ô∏è [HEDGE] run start: WS pos (L,S)=(0.1000,0.0000)
[2025-08-06T22:28:32] INFO bot [mode=HEDGE] : ‚è± [HEDGE] spike-filter: waiting 3.00s
[2025-08-06T22:28:35] INFO bot [mode=HEDGE] : üîß [HEDGE] placing market hedge: side=sell, size=0.2000
[2025-08-06T22:28:35] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: SELL/short closed size=0.2@0.20815
[2025-08-06T22:28:35] INFO bot [mode=HEDGE] : üéØ [HEDGE] placed hedge ordId=2751668643671887872
[2025-08-06T22:28:35] DEBUG bot [mode=HEDGE] : [HEDGE] waiting for fill up to +5.0s
[2025-08-06T22:28:36] INFO bot [mode=TPSL] : Two positions ‚Üí TPSL mode active
[2025-08-06T22:28:40] INFO bot [mode=-] : üõ†Ô∏è [TPSL] mismatch detected ‚Üí reinstall all algos
[2025-08-06T22:28:40] DEBUG bot [mode=-] : üîÑ [TPSL] reinstall_all ‚Üí init(long)=0.1@0.2077, hedge(short)=0.2@0.20815, tp_init=0.209777, tp_hedge=0.20764295
[2025-08-06T22:28:41] INFO bot [mode=-] : üßπ [TPSL] cancelled algos: [{'instId': 'DOGE-USDT-SWAP', 'algoId': '2751668527785132032'}]
[2025-08-06T22:28:41] INFO bot [mode=-] : üéØ [TPSL] placed OCO(LDOGEUSDTSWAP) @ 0.209777
[2025-08-06T22:28:42] INFO bot [mode=-] : üéØ [TPSL] placed Conditional(SDOGEUSDTSWAP) @ 0.20764295
[2025-08-06T22:28:48] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: SELL/long closed size=0.1@0.207
[2025-08-06T22:28:48] DEBUG bot [mode=-] : [TPSL-DEBUG] is_tp=True entry_side=long side=SELL
[2025-08-06T22:28:48] INFO bot [mode=-] : [REINVEST-SIGNAL] tp_filled_evt.set() fired, fill_px=0.207
[2025-08-06T22:28:48] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: BUY/short closed size=0.19@0.20725
[2025-08-06T22:28:48] ERROR bot [mode=LOOP] : Loop-level exception
Traceback (most recent call last):
  File "d:\Develop\Python\trade_bot\11.9.1\core\position_snapshot.py", line 86, in _on_ws_position
    px   = float(pos.get("avgPx", 0))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: could not convert string to float: ''
[2025-08-06T22:28:48] ERROR bot [mode=LOOP] : Loop-level exception
Traceback (most recent call last):
  File "d:\Develop\Python\trade_bot\11.9.1\core\position_snapshot.py", line 86, in _on_ws_position
    px   = float(pos.get("avgPx", 0))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: could not convert string to float: ''
[2025-08-06T22:28:49] INFO bot [mode=ORCHESTRATOR] : ‚Üí All legs closed ‚Üí back to ORDER mode
[2025-08-06T22:28:49] INFO bot [mode=ORDER] : ‚Üí ORDER mode , self.hedged = False
[2025-08-06T22:28:49] INFO bot [mode=ORDER] : üîÑ [OrderMode] starting order loop
[2025-08-06T22:28:50] INFO bot [mode=ORDER] : üéØ [OrderMode] placed FOK: BUY 2751669131989536768@0.20557156, SELL 2751669131754655744@0.20867844
[2025-08-06T22:28:55] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: SELL/short closed size=0.05@0.2087
[2025-08-06T22:28:55] INFO bot [mode=PREHEDGE] : ‚Üí PRE-HEDGE mode
[2025-08-06T22:28:55] INFO bot [mode=-] : üîÑ [PreHEDGE] –Ω–æ–≤—ã–π –∑–∞–ø—É—Å–∫ tp_watcher
[2025-08-06T22:28:55] INFO bot [mode=-] : üéØ [PreHEDGE] –∑–∞—Ö–æ–¥–∏–º –≤ not self.tp_active 
[2025-08-06T22:28:55] INFO bot [mode=ORDER] : üõë [OrderMode] cancelled 2751669131989536768
[2025-08-06T22:28:55] INFO bot [mode=-] : üéØ [PreHEDGE] TP placed @ 0.20661300
[2025-08-06T22:28:55] INFO bot [mode=-] : ‚è≥ [PreHEDGE] waiting for loss ‚â§ ‚àí0.50%
[2025-08-06T22:28:55] DEBUG bot [mode=-] : [PreHEDGE] loss_task alive? False
[2025-08-06T22:28:55] INFO bot [mode=-] : üö® [PreHEDGE] loss trigger hit ‚Üí starting hedge
[2025-08-06T22:28:55] INFO bot [mode=HEDGE] : ‚ñ∂Ô∏è [HEDGE] run start: WS pos (L,S)=(0.0000,0.0500)
[2025-08-06T22:28:55] INFO bot [mode=HEDGE] : ‚è± [HEDGE] spike-filter: waiting 3.00s
[2025-08-06T22:28:56] INFO bot [mode=ORDER] : ‚úÖ [OrderMode] filled 2751669131754655744, ORDER mode turn off
[2025-08-06T22:28:57] INFO bot [mode=HEDGE] : ‚è± [PREHEDGE] spike filtered: pnl back to 0.0128
[2025-08-06T22:28:58] INFO bot [mode=HEDGE] : üîß [HEDGE] placing market hedge: side=buy, size=0.1000
[2025-08-06T22:28:59] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: BUY/long closed size=0.1@0.20815
[2025-08-06T22:28:59] INFO bot [mode=HEDGE] : üéØ [HEDGE] placed hedge ordId=2751669419785900032
[2025-08-06T22:28:59] DEBUG bot [mode=HEDGE] : [HEDGE] waiting for fill up to +5.0s
[2025-08-06T22:28:59] INFO bot [mode=TPSL] : Two positions ‚Üí TPSL mode active
[2025-08-06T22:29:04] INFO bot [mode=-] : üõ†Ô∏è [TPSL] mismatch detected ‚Üí reinstall all algos
[2025-08-06T22:29:04] DEBUG bot [mode=-] : üîÑ [TPSL] reinstall_all ‚Üí init(short)=0.05@0.2087, hedge(long)=0.1@0.20815, tp_init=0.206613, tp_hedge=0.20876958
[2025-08-06T22:29:05] INFO bot [mode=-] : üßπ [TPSL] cancelled algos: [{'instId': 'DOGE-USDT-SWAP', 'algoId': '2751669305107103744'}]
[2025-08-06T22:29:06] INFO bot [mode=-] : üéØ [TPSL] placed OCO(SDOGEUSDTSWAP) @ 0.206613
[2025-08-06T22:29:06] INFO bot [mode=-] : üéØ [TPSL] placed Conditional(LDOGEUSDTSWAP) @ 0.20876958
[2025-08-06T22:29:10] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: BUY/short closed size=0.05@0.209
[2025-08-06T22:29:10] DEBUG bot [mode=-] : [TPSL-DEBUG] is_tp=True entry_side=short side=BUY
[2025-08-06T22:29:10] INFO bot [mode=-] : [REINVEST-SIGNAL] tp_filled_evt.set() fired, fill_px=0.209
[2025-08-06T22:29:10] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: SELL/long closed size=0.1@0.20785
[2025-08-06T22:29:10] ERROR bot [mode=LOOP] : Loop-level exception
Traceback (most recent call last):
  File "d:\Develop\Python\trade_bot\11.9.1\core\position_snapshot.py", line 86, in _on_ws_position
    px   = float(pos.get("avgPx", 0))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: could not convert string to float: ''
[2025-08-06T22:29:10] ERROR bot [mode=LOOP] : Loop-level exception
Traceback (most recent call last):
  File "d:\Develop\Python\trade_bot\11.9.1\core\position_snapshot.py", line 86, in _on_ws_position
    px   = float(pos.get("avgPx", 0))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: could not convert string to float: ''
[2025-08-06T22:29:11] INFO bot [mode=ORCHESTRATOR] : ‚Üí All legs closed ‚Üí back to ORDER mode
[2025-08-06T22:29:11] INFO bot [mode=ORDER] : ‚Üí ORDER mode , self.hedged = False
[2025-08-06T22:29:11] INFO bot [mode=ORDER] : üîÑ [OrderMode] starting order loop
[2025-08-06T22:29:13] INFO bot [mode=ORDER] : üéØ [OrderMode] placed FOK: BUY 2751669874280681472@0.20644, SELL 2751669891494105088@0.20956
[2025-08-06T22:29:23] INFO bot [mode=ORDER] : üïê [OrderMode] no fill after 10.0s, retry
[2025-08-06T22:29:23] INFO bot [mode=ORDER] : üõë [OrderMode] cancelled 2751669874280681472
[2025-08-06T22:29:23] INFO bot [mode=ORDER] : üõë [OrderMode] cancelled 2751669891494105088
[2025-08-06T22:29:23] INFO bot [mode=ORDER] : üîÑ [OrderMode] starting order loop
[2025-08-06T22:29:25] INFO bot [mode=ORDER] : üéØ [OrderMode] placed FOK: BUY 2751670301663481856@0.20768063, SELL 2751670295388803072@0.21081938
[2025-08-06T22:29:30] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: BUY/long closed size=0.05@0.20765
[2025-08-06T22:29:30] INFO bot [mode=ORDER] : üõë [OrderMode] cancelled 2751670295388803072
[2025-08-06T22:29:31] INFO bot [mode=ORDER] : ‚úÖ [OrderMode] filled 2751670301663481856, ORDER mode turn off
[2025-08-06T22:29:31] INFO bot [mode=PREHEDGE] : ‚Üí PRE-HEDGE mode
[2025-08-06T22:29:31] INFO bot [mode=-] : üîÑ [PreHEDGE] –Ω–æ–≤—ã–π –∑–∞–ø—É—Å–∫ tp_watcher
[2025-08-06T22:29:31] INFO bot [mode=-] : üéØ [PreHEDGE] –∑–∞—Ö–æ–¥–∏–º –≤ not self.tp_active 
[2025-08-06T22:29:31] INFO bot [mode=-] : üéØ [PreHEDGE] TP placed @ 0.20972650
[2025-08-06T22:29:31] INFO bot [mode=-] : ‚è≥ [PreHEDGE] waiting for loss ‚â§ ‚àí0.50%
[2025-08-06T22:29:31] DEBUG bot [mode=-] : [PreHEDGE] loss_task alive? False
[2025-08-06T22:29:31] INFO bot [mode=-] : üö® [PreHEDGE] loss trigger hit ‚Üí starting hedge
[2025-08-06T22:29:31] INFO bot [mode=HEDGE] : ‚ñ∂Ô∏è [HEDGE] run start: WS pos (L,S)=(0.0500,0.0000)
[2025-08-06T22:29:31] INFO bot [mode=HEDGE] : ‚è± [HEDGE] spike-filter: waiting 3.00s
[2025-08-06T22:29:34] INFO bot [mode=HEDGE] : üîß [HEDGE] placing market hedge: side=sell, size=0.1000
[2025-08-06T22:29:35] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: SELL/short closed size=0.09@0.20735
[2025-08-06T22:29:35] INFO bot [mode=HEDGE] : üéØ [HEDGE] placed hedge ordId=2751670638717751296
[2025-08-06T22:29:35] DEBUG bot [mode=HEDGE] : [HEDGE] waiting for fill up to +5.0s
[2025-08-06T22:29:35] INFO bot [mode=TPSL] : Two positions ‚Üí TPSL mode active
[2025-08-06T22:29:40] INFO bot [mode=-] : üõ†Ô∏è [TPSL] mismatch detected ‚Üí reinstall all algos
[2025-08-06T22:29:40] DEBUG bot [mode=-] : üîÑ [TPSL] reinstall_all ‚Üí init(long)=0.05@0.20765, hedge(short)=0.1@0.20735, tp_init=0.2097265, tp_hedge=0.20589296
[2025-08-06T22:29:40] INFO bot [mode=-] : üßπ [TPSL] cancelled algos: [{'instId': 'DOGE-USDT-SWAP', 'algoId': '2751670524173172736'}]
[2025-08-06T22:29:41] INFO bot [mode=-] : üéØ [TPSL] placed OCO(LDOGEUSDTSWAP) @ 0.2097265
[2025-08-06T22:29:41] INFO bot [mode=-] : üéØ [TPSL] placed Conditional(SDOGEUSDTSWAP) @ 0.20589296
[2025-08-06T22:31:35] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: SELL/long closed size=0.04@0.20975
[2025-08-06T22:31:35] DEBUG bot [mode=-] : [TPSL-DEBUG] is_tp=True entry_side=long side=SELL
[2025-08-06T22:31:35] INFO bot [mode=-] : [REINVEST-SIGNAL] tp_filled_evt.set() fired, fill_px=0.20975
[2025-08-06T22:31:35] ERROR bot [mode=LOOP] : Loop-level exception
Traceback (most recent call last):
  File "d:\Develop\Python\trade_bot\11.9.1\core\position_snapshot.py", line 86, in _on_ws_position
    px   = float(pos.get("avgPx", 0))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: could not convert string to float: ''
[2025-08-06T22:31:36] INFO bot [mode=REPREHEDGE] : ‚Üí TPSL ‚Üí PRE-HEDGE RE mode
[2025-08-06T22:31:36] INFO bot [mode=-] : üîÑ [PreHEDGE] –Ω–æ–≤—ã–π –∑–∞–ø—É—Å–∫ tp_watcher
[2025-08-06T22:31:36] INFO bot [mode=-] : üéØ [PreHEDGE] –∑–∞—Ö–æ–¥–∏–º –≤ not self.tp_active 
[2025-08-06T22:31:36] WARNING bot [mode=REST] : [REST] swallow code=1, sCode=['51088'] on POST /api/v5/trade/order-algo
[2025-08-06T22:31:36] ERROR bot [mode=-] : ‚ùå [PreHEDGE] TP placement failed: code=-1, msg=
[2025-08-06T22:31:36] INFO bot [mode=-] : ‚è≥ [PreHEDGE] waiting for loss ‚â§ ‚àí0.50%
[2025-08-06T22:31:36] DEBUG bot [mode=-] : [PreHEDGE] loss_task alive? False
[2025-08-06T22:31:36] INFO bot [mode=-] : üö® [PreHEDGE] loss trigger hit ‚Üí starting hedge
[2025-08-06T22:31:36] INFO bot [mode=HEDGE] : ‚ñ∂Ô∏è [HEDGE] run start: WS pos (L,S)=(0.0000,0.1000)
[2025-08-06T22:31:36] INFO bot [mode=HEDGE] : ‚è± [HEDGE] spike-filter: waiting 3.00s
[2025-08-06T22:31:36] INFO bot [mode=HEDGE] : ‚è± [PREHEDGE] spike filtered: pnl back to 0.0075
[2025-08-06T22:31:39] INFO bot [mode=HEDGE] : üîß [HEDGE] placing market hedge: side=buy, size=0.2000
[2025-08-06T22:31:39] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: BUY/long closed size=0.2@0.21005
[2025-08-06T22:31:40] INFO bot [mode=HEDGE] : üéØ [HEDGE] placed hedge ordId=2751674819566424064
[2025-08-06T22:31:40] DEBUG bot [mode=HEDGE] : [HEDGE] waiting for fill up to +5.0s
[2025-08-06T22:31:40] INFO bot [mode=TPSL] : Two positions ‚Üí TPSL mode active
[2025-08-06T22:31:40] INFO bot [mode=-] : üõ†Ô∏è [TPSL] mismatch detected ‚Üí reinstall all algos
[2025-08-06T22:31:40] DEBUG bot [mode=-] : üîÑ [TPSL] reinstall_all ‚Üí init(short)=0.1@0.20735, hedge(long)=0.2@0.21005, tp_init=0.2052765, tp_hedge=0.21372619
[2025-08-06T22:31:41] INFO bot [mode=-] : üßπ [TPSL] cancelled algos: [{'instId': 'DOGE-USDT-SWAP', 'algoId': '2751670851496656896'}]
[2025-08-06T22:31:42] INFO bot [mode=-] : üéØ [TPSL] placed OCO(SDOGEUSDTSWAP) @ 0.2052765
[2025-08-06T22:31:42] INFO bot [mode=-] : üéØ [TPSL] placed Conditional(LDOGEUSDTSWAP) @ 0.21372619
[2025-08-06T22:32:20] INFO bot [mode=SHUTDOWN] : Shutdown initiated
[2025-08-06T22:32:20] INFO bot [mode=SHUTDOWN] : Shutdown complete
[2025-08-06T22:32:25] INFO bot [mode=START] : ‚è≤Ô∏è Time offset set to 62 ms
[2025-08-06T22:32:26] INFO bot [mode=START] : üìà Initial snapshot fetched
[2025-08-06T22:32:27] INFO bot [mode=START] : Orchestrator started
[2025-08-06T22:32:27] INFO bot [mode=-] : [REINVEST-LOOP] –≤—Ö–æ–¥ –≤ —Ü–∏–∫–ª, –∂–¥—É tp_filled_evt
[2025-08-06T22:32:27] INFO bot [mode=STARTUP] : Startup detected TWO legs ‚Üí enter TPSL mode
[2025-08-06T22:32:27] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] login successful
[2025-08-06T22:32:28] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] subscribed to orders
[2025-08-06T22:32:28] INFO bot [mode=WS] : ‚úÖ [WS-PUB] subscribed to tickers
[2025-08-06T22:32:28] INFO bot [mode=WS] : ‚úÖ [WS-PRIV] subscribed to positions
[2025-08-06T22:32:30] DEBUG bot [mode=-] : üîÑ [TPSL] reinstall_all ‚Üí init(short)=0.1@0.20735, hedge(long)=0.2@0.21005, tp_init=0.2052765, tp_hedge=0.21372619
[2025-08-06T22:32:32] DEBUG bot [mode=-] : üîÑ [TPSL] initial sync pass
[2025-08-06T22:32:32] INFO bot [mode=-] : üßπ [TPSL] cancelled algos: [{'instId': 'DOGE-USDT-SWAP', 'algoId': '2751674896651206656'}, {'instId': 'DOGE-USDT-SWAP', 'algoId': '2751674911817809920'}]
[2025-08-06T22:32:32] INFO bot [mode=-] : üéØ [TPSL] placed OCO(SDOGEUSDTSWAP) @ 0.2052765
[2025-08-06T22:32:33] INFO bot [mode=-] : üéØ [TPSL] placed Conditional(LDOGEUSDTSWAP) @ 0.21372619
[2025-08-06T22:33:10] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: BUY/short closed size=0.1@0.2056
[2025-08-06T22:33:10] DEBUG bot [mode=-] : [TPSL-DEBUG] is_tp=True entry_side=short side=BUY
[2025-08-06T22:33:10] INFO bot [mode=-] : [REINVEST-SIGNAL] tp_filled_evt.set() fired, fill_px=0.2056
[2025-08-06T22:33:10] ERROR bot [mode=LOOP] : Loop-level exception
Traceback (most recent call last):
  File "d:\Develop\Python\trade_bot\11.9.1\core\orchestrator.py", line 229, in _reinvest_loop
    await self.reinvestor.handle_tp_fill((ep, eq, Decimal(str(tp_price)), side))
  File "d:\Develop\Python\trade_bot\11.9.1\core\reinvest.py", line 43, in handle_tp_fill
    await self._do_reinvest(snapshot)
  File "d:\Develop\Python\trade_bot\11.9.1\core\reinvest.py", line 49, in _do_reinvest
    ep, eq, tp, side = map(Decimal, snapshot)
    ^^^^^^^^^^^^^^^^
decimal.InvalidOperation: [<class 'decimal.ConversionSyntax'>]
[2025-08-06T22:33:11] INFO bot [mode=REPREHEDGE] : ‚Üí TPSL ‚Üí PRE-HEDGE RE mode
[2025-08-06T22:33:11] INFO bot [mode=-] : üîÑ [PreHEDGE] –Ω–æ–≤—ã–π –∑–∞–ø—É—Å–∫ tp_watcher
[2025-08-06T22:33:11] INFO bot [mode=-] : üéØ [PreHEDGE] –∑–∞—Ö–æ–¥–∏–º –≤ not self.tp_active 
[2025-08-06T22:33:11] WARNING bot [mode=REST] : [REST] swallow code=1, sCode=['51088'] on POST /api/v5/trade/order-algo
[2025-08-06T22:33:11] ERROR bot [mode=-] : ‚ùå [PreHEDGE] TP placement failed: code=-1, msg=
[2025-08-06T22:33:11] INFO bot [mode=-] : ‚è≥ [PreHEDGE] waiting for loss ‚â§ ‚àí0.50%
[2025-08-06T22:33:11] DEBUG bot [mode=-] : [PreHEDGE] loss_task alive? True
[2025-08-06T22:33:14] INFO bot [mode=-] : üö® [PreHEDGE] loss trigger hit ‚Üí starting hedge
[2025-08-06T22:33:14] INFO bot [mode=HEDGE] : ‚ñ∂Ô∏è [HEDGE] run start: WS pos (L,S)=(0.2000,0.0000)
[2025-08-06T22:33:14] INFO bot [mode=HEDGE] : ‚è± [HEDGE] spike-filter: waiting 3.00s
[2025-08-06T22:33:17] INFO bot [mode=HEDGE] : üîß [HEDGE] placing market hedge: side=sell, size=0.4000
[2025-08-06T22:33:17] INFO bot [mode=FILL] : ‚ö° [FILL] DOGE-USDT-SWAP: SELL/short closed size=0.4@0.2069
[2025-08-06T22:33:17] INFO bot [mode=HEDGE] : üéØ [HEDGE] placed hedge ordId=2751678100854329344
[2025-08-06T22:33:17] DEBUG bot [mode=HEDGE] : [HEDGE] waiting for fill up to +5.0s
[2025-08-06T22:33:18] INFO bot [mode=TPSL] : Two positions ‚Üí TPSL mode active
[2025-08-06T22:33:18] INFO bot [mode=-] : üõ†Ô∏è [TPSL] mismatch detected ‚Üí reinstall all algos
[2025-08-06T22:33:18] DEBUG bot [mode=-] : üîÑ [TPSL] reinstall_all ‚Üí init(long)=0.2@0.21005, hedge(short)=0.4@0.2069, tp_init=0.2121505, tp_hedge=0.20290778
[2025-08-06T22:33:19] INFO bot [mode=-] : üßπ [TPSL] cancelled algos: [{'instId': 'DOGE-USDT-SWAP', 'algoId': '2751676601853886464'}]
[2025-08-06T22:33:20] INFO bot [mode=-] : üéØ [TPSL] placed OCO(LDOGEUSDTSWAP) @ 0.2121505
[2025-08-06T22:33:20] INFO bot [mode=-] : üéØ [TPSL] placed Conditional(SDOGEUSDTSWAP) @ 0.20290778
[2025-08-06T22:38:15] INFO bot [mode=WS] : ‚úÖ [WS-PUB] subscribed to tickers
[2025-08-06T22:44:40] INFO bot [mode=SHUTDOWN] : Shutdown initiated
[2025-08-06T22:44:40] INFO bot [mode=SHUTDOWN] : Shutdown complete
